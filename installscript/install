#!/bin/bash

# Start and Enable NetworkManager
sudo systemctl enable NetworkManager.service --now

# Install paru
git clone https://aur.archlinux.org/paru.git
cd paru
makepkg -si
cd ..

# Get base dependencies
paru -S --needed --noconfirm \
dotnet-sdk \
base-devel openssl zlib xz git \
spotify-tui spotifyd zsh tmux nvim neofetch \
flameshot firefox discord \
code \
gtk-engine-murrine gtk-engines

# Update existing packages and sources
paru --noconfirm


## INSTALL PROGRAMMING LANGUAGES
# Install jenv
git clone https://github.com/jenv/jenv.git $HOME/.jenv

# Install Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh


## APP SETUP
# Install fzf
git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
~/.fzf/install

# Set up ZSH
chsh -s /bin/zsh
curl -L git.io/antigen > $HOME/antigen.zsh

# Configure tmux
git clone https://github.com/tmux-plugins/tpm $HOME/.tmux/plugins/tpm

# Configure neovim
sh -c 'curl -fLo "${XDG_DATA_HOME:-$HOME/.local/share}"/nvim/site/autoload/plug.vim --create-dirs \
       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'

# Configure VSCode
code --install-extension ms-python.python


## THEMING
# Download Themes
wget -c https://github.com/EliverLara/Nordic/releases/latest/download/Nordic.tar.xz -O - | sudo tar -xJ -C /usr/share/themes
sudo git clone https://github.com/FadeMind/manjarin-gtk-theme.git /usr/share/themes/manjarin
wget -c https://github.com/dracula/gtk/releases/latest/download/Dracula.tar -O - | sudo tar -xJ -C /usr/share/themes

# Download Icon Themes
wget -qO- https://git.io/papirus-icon-theme-install | sh
wget -c https://github.com/dracula/gtk/files/5214870/Dracula.zip -O - | sudo unzip -d /usr/share/icons

# Set GNOME preferences
gsettings set org.gnome.desktop.wm.preferences theme "Dracula"
gsettings set org.gnome.desktop.interface gtk-theme "Dracula"
gsettings set org.gnome.desktop.interface icon-theme "Dracula"
gsettings set org.gnome.desktop.peripherals.touchpad tap-to-click true
gsettings set org.gnome.desktop.peripherals.touchpad tap-and-drag-lock true
gsettings set org.gnome.desktop.wm.preferences button-layout 'appmenu:minimize,maximize,close'

# Set GNOME shortcuts
dconf load / < keybindings

echo "Please reboot now"
